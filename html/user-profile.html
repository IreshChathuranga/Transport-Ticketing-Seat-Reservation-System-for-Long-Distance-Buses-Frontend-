<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile - Bus Ticketing System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="../css/profile.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container">
        <a class="navbar-brand" href="#"><img src="../image/logo3.png" alt="Bus Ticketing Logo" class="logo-img mb-2"></a>
        <div class="navbar-nav ms-auto">
            <a class="nav-link" href="09-booking-history.html"><i class="fas fa-history me-1"></i>Bookings</a>
            <a class="nav-link active" href="#"><i class="fas fa-user me-1"></i>Profile</a>
            <a class="nav-link" href="#"><i class="fas fa-sign-out-alt me-1"></i>Logout</a>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <!-- Profile Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="card profile-header">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-md-3 text-center">
                            <div class="profile-avatar-container">
                                <img src="/placeholder.svg?height=120&width=120"
                                     alt="Profile Picture" class="profile-avatar">
                                <button class="btn btn-sm btn-primary profile-avatar-edit" data-bs-toggle="modal" data-bs-target="#changeAvatarModal">
                                    <i class="fas fa-camera"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <h3 class="mb-1"><span id="profileName">Loading...</span></h3>
                            <p class="text-muted mb-2"><span id="profileEmail">Loading...</span></p>
                            <div class="profile-stats">
                                    <span class="badge bg-primary me-2">
                                        <i class="fas fa-ticket-alt me-1"></i>24 Trips
                                    </span>
                                <span class="badge bg-success me-2">
                                        <i class="fas fa-star me-1"></i>4.8 Rating
                                    </span>
                                <span class="badge bg-info">
                                        <i class="fas fa-calendar me-1"></i>Member since Jan 2024
                                    </span>
                            </div>
                            <small class="text-secondary"><b>Role:</b> <span id="profileRole"></span></small>
                        </div>
                        <div class="col-md-3 text-end">
                            <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#editProfileModal">
                                <i class="fas fa-edit me-2"></i>Edit Profile
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row">
        <!-- Profile Navigation -->
        <div class="col-md-3">
            <div class="card1 nav-body">
                <div class="card-body p-0">
                    <div class="list-group list-group-flush">
                        <a href="#personal-info-section" class="list-group-item list-group-item-action active" data-section="personal-info">
                            <i class="fas fa-user me-2"></i>Personal Information
                        </a>
                        <a href="#account-security-section" class="list-group-item list-group-item-action" data-section="account-security">
                            <i class="fas fa-shield-alt me-2"></i>Account Security
                        </a>
                        <a href="#travel-preferences-section" class="list-group-item list-group-item-action" data-section="travel-preferences">
                            <i class="fas fa-cog me-2"></i>Travel Preferences
                        </a>
                        <a href="#notifications-section" class="list-group-item list-group-item-action" data-section="notifications">
                            <i class="fas fa-bell me-2"></i>Notifications
                        </a>
                        <a href="#payment-methods-section" class="list-group-item list-group-item-action" data-section="payment-methods">
                            <i class="fas fa-credit-card me-2"></i>Payment Methods
                        </a>
                        <a href="#account-settings-section" class="list-group-item list-group-item-action" data-section="account-settings">
                            <i class="fas fa-sliders-h me-2"></i>Account Settings
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Content -->
        <div class="col-md-9">
            <!-- Personal Information Section -->
            <div id="personal-info-section" class="profile-section">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="fas fa-user me-2"></i>Personal Information</h5>
                        <button class="btn btn-sm btn-outline-primary" onclick="toggleEdit('personal-info')">
                            <i class="fas fa-edit me-1"></i>Edit
                        </button>
                    </div>
                    <div class="card-body">
                        <form id="personalInfoForm">
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">First Name</label>
                                        <input type="text" class="form-control" value="John" readonly>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Last Name</label>
                                        <input type="text" class="form-control" value="Doe" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Email Address</label>
                                        <input type="email" class="form-control" value="john.doe@email.com" readonly>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Phone Number</label>
                                        <input type="tel" class="form-control" value="+94 77 123 4567" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">NIC Number</label>
                                        <input type="text" class="form-control" value="200012345678" readonly>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Date of Birth</label>
                                        <input type="date" class="form-control" value="2000-01-15" readonly>
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Address</label>
                                <textarea class="form-control" rows="3" readonly>123 Main Street, Colombo 07, Sri Lanka</textarea>
                            </div>
                            <div class="edit-actions d-none">
                                <button type="button" class="btn btn-success me-2" onclick="savePersonalInfo()">
                                    <i class="fas fa-save me-1"></i>Save Changes
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="cancelEdit('personal-info')">
                                    Cancel
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Account Security Section -->
            <div id="account-security-section" class="profile-section d-none">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-shield-alt me-2"></i>Account Security</h5>
                    </div>
                    <div class="card-body">
                        <!-- Password Change -->
                        <div class="security-item mb-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div>
                                    <h6 class="mb-1">Password</h6>
                                    <small class="text-muted">Last changed 30 days ago</small>
                                </div>
                                <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#changePasswordModal">
                                    Change Password
                                </button>
                            </div>
                        </div>

                        <!-- Two-Factor Authentication -->
                        <div class="security-item mb-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <div>
                                    <h6 class="mb-1">Two-Factor Authentication</h6>
                                    <small class="text-muted">Add an extra layer of security to your account</small>
                                </div>
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="twoFactorAuth">
                                    <label class="form-check-label" for="twoFactorAuth">Enable</label>
                                </div>
                            </div>
                        </div>

                        <!-- Login Sessions -->
                        <div class="security-item">
                            <h6 class="mb-3">Active Sessions</h6>
                            <div class="session-item d-flex justify-content-between align-items-center mb-2">
                                <div>
                                    <div class="fw-bold">Current Session</div>
                                    <small class="text-muted">Chrome on Windows â€¢ Colombo, Sri Lanka</small>
                                </div>
                                <span class="badge bg-success">Active</span>
                            </div>
                            <div class="session-item d-flex justify-content-between align-items-center">
                                <div>
                                    <div class="fw-bold">Mobile App</div>
                                    <small class="text-muted">Android â€¢ Last active 2 hours ago</small>
                                </div>
                                <button class="btn btn-sm btn-outline-danger">Revoke</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Travel Preferences Section -->
            <div id="travel-preferences-section" class="profile-section d-none">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-cog me-2"></i>Travel Preferences</h5>
                    </div>
                    <div class="card-body">
                        <form id="travelPreferencesForm">
                            <div class="mb-4">
                                <h6 class="mb-3">Seat Preferences</h6>
                                <div class="row">
                                    <div class="col-md-6">
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="radio" name="seatPreference" id="windowSeat" checked>
                                            <label class="form-check-label" for="windowSeat">
                                                Window Seat
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="radio" name="seatPreference" id="aisleSeat">
                                            <label class="form-check-label" for="aisleSeat">
                                                Aisle Seat
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="radio" name="seatPreference" id="frontSeat">
                                            <label class="form-check-label" for="frontSeat">
                                                Front Section
                                            </label>
                                        </div>
                                        <div class="form-check mb-2">
                                            <input class="form-check-input" type="radio" name="seatPreference" id="noPreference">
                                            <label class="form-check-label" for="noPreference">
                                                No Preference
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-4">
                                <h6 class="mb-3">Favorite Routes</h6>
                                <div class="favorite-routes">
                                    <div class="route-item d-flex justify-content-between align-items-center mb-2">
                                        <span>Colombo â†’ Kandy</span>
                                        <button class="btn btn-sm btn-outline-danger">Remove</button>
                                    </div>
                                    <div class="route-item d-flex justify-content-between align-items-center mb-2">
                                        <span>Colombo â†’ Galle</span>
                                        <button class="btn btn-sm btn-outline-danger">Remove</button>
                                    </div>
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-plus me-1"></i>Add Route
                                    </button>
                                </div>
                            </div>

                            <div class="mb-4">
                                <h6 class="mb-3">Travel Settings</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="autoInsurance" checked>
                                    <label class="form-check-label" for="autoInsurance">
                                        Automatically add travel insurance
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="reminderNotifications" checked>
                                    <label class="form-check-label" for="reminderNotifications">
                                        Send journey reminders
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="promotionalOffers">
                                    <label class="form-check-label" for="promotionalOffers">
                                        Receive promotional offers
                                    </label>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-2"></i>Save Preferences
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Notifications Section -->
            <div id="notifications-section" class="profile-section d-none">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-bell me-2"></i>Notification Preferences</h5>
                    </div>
                    <div class="card-body">
                        <form id="notificationPreferencesForm">
                            <div class="mb-4">
                                <h6 class="mb-3">Email Notifications</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="emailBooking" checked>
                                    <label class="form-check-label" for="emailBooking">
                                        Booking confirmations and updates
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="emailPayment" checked>
                                    <label class="form-check-label" for="emailPayment">
                                        Payment confirmations and receipts
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="emailSchedule" checked>
                                    <label class="form-check-label" for="emailSchedule">
                                        Schedule changes and delays
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="emailPromotional">
                                    <label class="form-check-label" for="emailPromotional">
                                        Promotional offers and discounts
                                    </label>
                                </div>
                            </div>

                            <div class="mb-4">
                                <h6 class="mb-3">SMS Notifications</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="smsBooking" checked>
                                    <label class="form-check-label" for="smsBooking">
                                        Booking confirmations
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="smsSchedule" checked>
                                    <label class="form-check-label" for="smsSchedule">
                                        Schedule updates and delays
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="smsReminders" checked>
                                    <label class="form-check-label" for="smsReminders">
                                        Journey reminders (2 hours before)
                                    </label>
                                </div>
                            </div>

                            <div class="mb-4">
                                <h6 class="mb-3">Push Notifications</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="pushBooking" checked>
                                    <label class="form-check-label" for="pushBooking">
                                        Real-time booking updates
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="pushTracking" checked>
                                    <label class="form-check-label" for="pushTracking">
                                        Live bus tracking updates
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="pushOffers">
                                    <label class="form-check-label" for="pushOffers">
                                        Special offers and deals
                                    </label>
                                </div>
                            </div>

                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save me-2"></i>Save Notification Settings
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Payment Methods Section -->
            <div id="payment-methods-section" class="profile-section d-none">
                <div class="card">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <h5 class="mb-0"><i class="fas fa-credit-card me-2"></i>Payment Methods</h5>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addPaymentModal">
                            <i class="fas fa-plus me-2"></i>Add Payment Method
                        </button>
                    </div>
                    <div class="card-body">
                        <!-- Saved Cards -->
                        <div class="payment-method-item d-flex justify-content-between align-items-center mb-3">
                            <div class="d-flex align-items-center">
                                <i class="fab fa-cc-visa fa-2x text-primary me-3"></i>
                                <div>
                                    <div class="fw-bold">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 1234</div>
                                    <small class="text-muted">Expires 12/26</small>
                                </div>
                            </div>
                            <div>
                                <span class="badge bg-success me-2">Default</span>
                                <button class="btn btn-sm btn-outline-danger">Remove</button>
                            </div>
                        </div>

                        <div class="payment-method-item d-flex justify-content-between align-items-center mb-3">
                            <div class="d-flex align-items-center">
                                <i class="fab fa-cc-mastercard fa-2x text-warning me-3"></i>
                                <div>
                                    <div class="fw-bold">â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ â€¢â€¢â€¢â€¢ 5678</div>
                                    <small class="text-muted">Expires 08/25</small>
                                </div>
                            </div>
                            <div>
                                <button class="btn btn-sm btn-outline-primary me-2">Set Default</button>
                                <button class="btn btn-sm btn-outline-danger">Remove</button>
                            </div>
                        </div>

                        <!-- Digital Wallets -->
                        <hr>
                        <h6 class="mb-3">Digital Wallets</h6>
                        <div class="payment-method-item d-flex justify-content-between align-items-center mb-3">
                            <div class="d-flex align-items-center">
                                <i class="fas fa-mobile-alt fa-2x text-success me-3"></i>
                                <div>
                                    <div class="fw-bold">eZ Cash</div>
                                    <small class="text-muted">+94 77 123 4567</small>
                                </div>
                            </div>
                            <button class="btn btn-sm btn-outline-danger">Remove</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Account Settings Section -->
            <div id="account-settings-section" class="profile-section d-none">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0"><i class="fas fa-sliders-h me-2"></i>Account Settings</h5>
                    </div>
                    <div class="card-body">
                        <div class="settings-group mb-4">
                            <h6 class="mb-3">Privacy Settings</h6>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="profileVisibility" checked>
                                <label class="form-check-label" for="profileVisibility">
                                    Make my profile visible to other users
                                </label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="shareData">
                                <label class="form-check-label" for="shareData">
                                    Share anonymous usage data to improve service
                                </label>
                            </div>
                        </div>

                        <div class="settings-group mb-4">
                            <h6 class="mb-3">Language & Region</h6>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Language</label>
                                        <select class="form-select">
                                            <option selected>English</option>
                                            <option>Sinhala</option>
                                            <option>Tamil</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Currency</label>
                                        <select class="form-select">
                                            <option selected>Sri Lankan Rupee (LKR)</option>
                                            <option>US Dollar (USD)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="settings-group mb-4">
                            <h6 class="mb-3">Data Management</h6>
                            <div class="d-flex gap-2 mb-3">
                                <button class="btn btn-outline-info">
                                    <i class="fas fa-download me-2"></i>Download My Data
                                </button>
                                <button class="btn btn-outline-warning">
                                    <i class="fas fa-user-times me-2"></i>Deactivate Account
                                </button>
                            </div>
                            <small class="text-muted">
                                You can download all your data or temporarily deactivate your account.
                                Account deactivation can be reversed within 30 days.
                            </small>
                        </div>

                        <button type="button" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>Save Settings
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Change Password Modal -->
<div class="modal fade" id="changePasswordModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Change Password</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="changePasswordForm">
                    <div class="mb-3">
                        <label for="currentPassword" class="form-label">Current Password</label>
                        <input type="password" class="form-control" id="currentPassword" required>
                    </div>
                    <div class="mb-3">
                        <label for="newPassword" class="form-label">New Password</label>
                        <input type="password" class="form-control" id="newPassword" required>
                        <div class="form-text">Password must be at least 8 characters long</div>
                    </div>
                    <div class="mb-3">
                        <label for="confirmNewPassword" class="form-label">Confirm New Password</label>
                        <input type="password" class="form-control" id="confirmNewPassword" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Change Password</button>
            </div>
        </div>
    </div>
</div>

<!-- Add Payment Method Modal -->
<div class="modal fade" id="addPaymentModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add Payment Method</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="payment-method-tabs mb-3">
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#card-tab">
                                <i class="fas fa-credit-card me-2"></i>Credit/Debit Card
                            </button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#wallet-tab">
                                <i class="fas fa-mobile-alt me-2"></i>Digital Wallet
                            </button>
                        </li>
                    </ul>
                </div>
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="card-tab">
                        <form>
                            <div class="mb-3">
                                <label class="form-label">Card Number</label>
                                <input type="text" class="form-control" placeholder="1234 5678 9012 3456">
                            </div>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">Expiry Date</label>
                                        <input type="text" class="form-control" placeholder="MM/YY">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label class="form-label">CVV</label>
                                        <input type="text" class="form-control" placeholder="123">
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Cardholder Name</label>
                                <input type="text" class="form-control" placeholder="John Doe">
                            </div>
                        </form>
                    </div>
                    <div class="tab-pane fade" id="wallet-tab">
                        <form>
                            <div class="mb-3">
                                <label class="form-label">Wallet Type</label>
                                <select class="form-select">
                                    <option>eZ Cash</option>
                                    <option>mCash</option>
                                    <option>PayPal</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Phone Number / Email</label>
                                <input type="text" class="form-control" placeholder="+94 77 123 4567">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Add Payment Method</button>
            </div>
        </div>
    </div>
</div>

<!-- Change Avatar Modal -->
<div class="modal fade" id="changeAvatarModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Change Profile Picture</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body text-center">
                <div class="avatar-upload-area mb-3">
                    <img src="/placeholder.svg?height=150&width=150"
                         alt="Profile Preview" class="avatar-preview mb-3">
                    <div>
                        <input type="file" class="form-control" accept="image/*" id="avatarUpload">
                    </div>
                </div>
                <small class="text-muted">Recommended: Square image, at least 200x200 pixels</small>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary">Save Picture</button>
            </div>
        </div>
    </div>
</div>
<script>
    document.addEventListener("DOMContentLoaded", async () => {
        // ðŸ”¹ Check login
        const token = localStorage.getItem("jwtToken");
        const user = localStorage.getItem("user");

        if (!token || !user) {
            alert("Please login first!");
            window.location.href = "login.html";
            return;
        }

        // ðŸ”¹ Parse user info
        const userObj = JSON.parse(user);

        // Example: Show in profile page
        document.getElementById("profileName").textContent = userObj.name;
        document.getElementById("profileEmail").textContent = userObj.email;
        document.getElementById("profileRole").textContent = userObj.phone;

        // ðŸ”¹ If backend data need to fetch
        try {
            const res = await fetch("http://localhost:8080/api/v1/user/get", {
                method: "GET",
                headers: { "Authorization": "Bearer " + token }
            });

            if (res.ok) {
                const data = await res.json();
                console.log("User profile:", data);
                // data use karanna (if you want)
            } else {
                alert("Session expired, please login again.");
                localStorage.removeItem("jwtToken");
                localStorage.removeItem("user");
                window.location.href = "user-login.html";
            }
        } catch (err) {
            console.error("Profile load error:", err);
        }
    });
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!--<script src="js/profile.js"></script>-->
</body>
</html>
